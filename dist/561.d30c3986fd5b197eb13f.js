/*! For license information please see 561.d30c3986fd5b197eb13f.js.LICENSE.txt */
"use strict";(self.webpackChunkweb_berbagi_cerita=self.webpackChunkweb_berbagi_cerita||[]).push([[561],{561:(t,e,n)=>{n.r(e),n.d(e,{default:()=>m});var r=n(468),o=n(399),i=n(891);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return c(s,"_invoke",function(n,r,o){var i,u,c,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],y=p.p,b=i[2];n>3?(o=b===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<b&&(o=n<3||i[0]>r||r>b)&&(i[4]=n,i[5]=r,p.n=b,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&y(s,b),u=s,c=b;(e=u<2?t:c)||!f;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(l=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function l(){}function s(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(c(e={},r,function(){return this}),e),y=f.prototype=l.prototype=Object.create(p);function b(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,c(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t}return s.prototype=f,c(y,"constructor",f),c(f,"constructor",s),s.displayName="GeneratorFunction",c(f,o,"GeneratorFunction"),c(y),c(y,o,"Generator"),c(y,r,function(){return this}),c(y,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:b}})()}function c(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}c=function(t,e,n,r){function i(e,n){c(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},c(t,e,n,r)}function l(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function f(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}var p=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=e},e=[{key:"handleLogin",value:(n=u().m(function t(e){var n,r,a,c,l;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=e.email,r=e.password,t.p=1,t.n=2,o.A.login(n,r);case 2:null!=(c=t.v)&&null!==(a=c.loginResult)&&void 0!==a&&a.token?(i.A.setToken(c.loginResult.token),this.view.showSuccess("Login berhasil!"),this.view.navigateTo("/")):this.view.showError("Login gagal, periksa kembali email/password."),t.n=4;break;case 3:t.p=3,l=t.v,this.view.showError(l.message||"Login gagal.");case 4:return t.a(2)}},t,this,[[1,3]])}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){l(i,r,o,a,u,"next",t)}function u(t){l(i,r,o,a,u,"throw",t)}a(void 0)})},function(t){return r.apply(this,arguments)})}],e&&s(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function v(t){var e=function(t){if("object"!=y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}var m=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.presenter=new p(this)},e=[{key:"render",value:function(){var t=this;this.container.innerHTML='\n      <section aria-labelledby="login-title">\n        <h2 id="login-title">Login</h2>\n        <form id="login-form">\n          <label for="email">Email</label>\n          <input id="email" name="email" type="email" required />\n          \n          <label for="password">Password</label>\n          <input id="password" name="password" type="password" required minlength="8" />\n          \n          <div class="form-actions">\n            <button type="submit">Masuk</button>\n          </div>\n        </form>\n\n        <p>\n          Belum punya akun? \n          <a href="#/register" id="go-register">Daftar di sini</a>\n        </p>\n      </section>\n    ',this.container.querySelector("#login-form")&&this.bindOnSubmit(function(e){return t.presenter.handleLogin(e)})}},{key:"bindOnSubmit",value:function(t){var e=this.container.querySelector("#login-form");e&&e.addEventListener("submit",function(n){n.preventDefault();var r=e.email.value.trim(),o=e.password.value.trim();t({email:r,password:o})})}},{key:"showError",value:function(t){(0,r.P)(t||"Terjadi kesalahan",4e3,"error")}},{key:"showSuccess",value:function(t){(0,r.P)(t||"Berhasil",3e3,"success")}},{key:"navigateTo",value:function(t){window.location.hash=t}}],e&&b(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}()}}]);