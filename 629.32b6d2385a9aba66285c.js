/*! For license information please see 629.32b6d2385a9aba66285c.js.LICENSE.txt */
"use strict";(self.webpackChunkweb_berbagi_cerita=self.webpackChunkweb_berbagi_cerita||[]).push([[629],{629:(t,e,r)=>{r.r(e),r.d(e,{default:()=>p});var n=r(891),o=r(468),i=r(877);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,f=Object.create(u.prototype);return c(f,"_invoke",function(r,n,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,r){return i=e,u=0,c=t,p.n=r,a}};function v(r,n){for(u=r,c=n,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],v=p.p,y=i[2];r>3?(o=y===n)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=r<2&&v<i[1])?(u=0,p.v=n,p.n=i[1]):v<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,u=0))}if(o||r>1)return a;throw l=!0,n}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:r.call(n,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(r,o,i),!0),f}var a={};function s(){}function f(){}function l(){}e=Object.getPrototypeOf;var p=[][n]?e(e([][n]())):(c(e={},n,function(){return this}),e),v=l.prototype=s.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,c(t,o,"GeneratorFunction")),t.prototype=Object.create(v),t}return f.prototype=l,c(v,"constructor",l),c(l,"constructor",f),f.displayName="GeneratorFunction",c(l,o,"GeneratorFunction"),c(v),c(v,o,"Generator"),c(v,n,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:y}})()}function c(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}c=function(t,e,r,n){function i(e,r){c(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},c(t,e,r,n)}function s(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}var p=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=e},e=[{key:"submit",value:(r=u().m(function t(e){var r,a,c,s,f,l,p,v,y;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=e.description,a=e.photoFile,c=e.lat,s=e.lon,f=e.guest,l=void 0!==f&&f,this.view.showSaving(),t.p=1,t.n=2,n.A.addProduct({description:r,photoFile:a,lat:c,lon:s,guest:l});case 2:(0,o.P)("Cerita berhasil diunggah ke server ðŸŽ‰",3e3,"success"),this.view.showSaved(),t.n=7;break;case 3:return t.p=3,y=t.v,console.error("AddPresenter submit error:",y),p={description:r,lat:c,lon:s,guest:l,photoFile:a,createdAt:(new Date).toISOString()},t.n=4,i.DB.addPending(p);case 4:if(!("serviceWorker"in navigator)||!("SyncManager"in window)){t.n=6;break}return t.n=5,navigator.serviceWorker.ready;case 5:return v=t.v,t.n=6,v.sync.register("sync-new-story");case 6:this.view.showSavedWithWarning(y.message||"Offline - disimpan lokal"),(0,o.P)("Gagal unggah ke server. Cerita disimpan lokal untuk sinkronisasi.",4e3,"error");case 7:return t.a(2)}},t,this,[[1,3]])}),a=function(){var t=this,e=arguments;return new Promise(function(n,o){var i=r.apply(t,e);function a(t){s(i,n,o,a,u,"next",t)}function u(t){s(i,n,o,a,u,"throw",t)}a(void 0)})},function(t){return a.apply(this,arguments)})}],e&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,a}()}}]);